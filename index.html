<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸš€ GeliÅŸmiÅŸ Sohbet UygulamasÄ± - Lokasyon BazlÄ±</title>
    <link rel="stylesheet" href="modern-styles.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Modern Menubar -->
  <div class="menubar">
        <h1>ğŸš€ GeliÅŸmiÅŸ Sohbet</h1>
        <div class="menubar-buttons">
      <button id="btnLogin" data-translate="login">GiriÅŸ</button>
            <button id="btnProfile" data-translate="profile" style="display:none;">Profil</button>
            <button id="btnLocation" onclick="openLocationModal()" data-translate="location">ğŸ“ Lokasyon</button>
            <button id="btnSponsor" data-translate="sponsor">ğŸ’° Sponsor</button>
            <button id="btnCreateChannel" data-translate="createChannel">â• Kanal OluÅŸtur</button>
            <button id="btnDonate">â˜• Kahve Ä°kram Et</button>
            <button id="btnMenu">â˜°</button>
  </div>
    </div>

    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <!-- KullanÄ±cÄ± Bilgisi -->
            <div class="user-info">
                <div class="user-avatar">ğŸ‘¤</div>
                <div class="user-details">
                    <div class="user-name" id="userName">Anonim</div>
                    <div class="user-status" id="userStatus">Ã‡evrimiÃ§i</div>
                    <div class="location-indicator" id="locationIndicator" style="display:none;">
                        <span id="currentLocation">Lokasyon algÄ±lanÄ±yor...</span>
                    </div>
                    <button id="btnLogin" onclick="openLoginModal()" style="margin-top: 10px; padding: 8px 16px; background: var(--brand); color: white; border: none; border-radius: 4px; cursor: pointer;" data-translate="loginBtn">GiriÅŸ</button>
    </div>
  </div>

            <!-- Kanallar -->
            <div class="channels-section">
                <h3 data-translate="sponsorChannelsTitle">ğŸ’° Sponsor Kanallar</h3>
                <ul class="list" id="sponsorList">
                    <!-- Sponsor kanallar buraya yÃ¼klenecek -->
                </ul>

                <h3 data-translate="generalChannelsTitle">ğŸŒ Genel Kanallar</h3>
                <ul class="list" id="channelList">
                    <!-- Lokasyon bazlÄ± kanallar buraya yÃ¼klenecek -->
                </ul>

                <h3 data-translate="favoriteChannelsTitle">â­ Favori KanallarÄ±m</h3>
                <ul class="list" id="followList">
                    <!-- Takip edilen kanallar -->
                </ul>
  </div>

            <!-- KullanÄ±cÄ±lar -->
            <div class="users-section">
                <h3 data-translate="users">ğŸ‘¥ KullanÄ±cÄ±lar</h3>
                <ul class="list" id="userList">
                    <!-- Aktif kullanÄ±cÄ±lar -->
                </ul>
      </div>
      
            <!-- Kanal Ekleme -->
            <div class="channel-add">
                <input type="text" id="newChannel" placeholder="Yeni kanal adÄ± (#kanal)" data-placeholder="channelName">
                <button id="btnAddChannel" data-translate="addBtn">Ekle</button>
    </div>
  </div>

        <!-- Ana Ä°Ã§erik -->
        <div class="main-content">
            <div class="chat-container">
                <!-- Kanal BaÅŸlÄ±ÄŸÄ± -->
                <div class="channel-header">
                    <h2 id="currentChannel">#genel</h2>
                    <div class="channel-info">
                        <span id="userCount">0 kullanÄ±cÄ±</span>
                        <span id="channelDescription">Genel sohbet kanalÄ±</span>
                    </div>
      </div>
      
                <!-- Mesajlar -->
                <div class="messages" id="messages">
                    <div class="info">ğŸš€ GeliÅŸmiÅŸ sohbet uygulamasÄ±na hoÅŸ geldiniz!</div>
                    <div class="info">ğŸ“ Lokasyonunuz otomatik algÄ±lanÄ±yor...</div>
                    <div class="info">ğŸŒ Dil otomatik olarak ayarlanÄ±yor...</div>
      </div>
      
                <!-- YazÄ±yor GÃ¶stergesi -->
                <div class="typing-area" id="typingArea"></div>

                <!-- Mesaj GÃ¶nderme -->
                <div class="input-area">
                    <input type="text" id="messageInput" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..." data-placeholder="messageInput">
                    <button id="btnSend">GÃ¶nder</button>
      </div>
    </div>
      </div>
    </div>

    <!-- Mobil MenÃ¼ -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <h3>MenÃ¼</h3>
            <button class="mobile-menu-close" onclick="toggleMobileMenu()">âœ–</button>
  </div>

        <div class="mobile-menu-content">
            <!-- Mobil Kanallar -->
            <div class="mobile-channels">
                <h4 data-translate="sponsorChannelsTitle">ğŸ’° Sponsor Kanallar</h4>
                <ul class="mobile-list" id="sponsorListMobile"></ul>

                <h4 data-translate="generalChannelsTitle">ğŸŒ Genel Kanallar</h4>
                <ul class="mobile-list" id="channelListMobile"></ul>

                <h4 data-translate="favoriteChannelsTitle">â­ Favori KanallarÄ±m</h4>
                <ul class="mobile-list" id="followListMobile"></ul>
      </div>
      
            <!-- Mobil KullanÄ±cÄ±lar -->
            <div class="mobile-users">
                <h4 data-translate="users">ğŸ‘¥ KullanÄ±cÄ±lar</h4>
                <ul class="mobile-list" id="userListMobile"></ul>
      </div>
      
            <!-- Mobil Kanal Ekleme -->
            <div class="mobile-channel-add">
                <input type="text" id="newChannelMobile" placeholder="Yeni kanal adÄ±" data-placeholder="channelName">
                <button id="btnAddChannelMobile" data-translate="addBtn">Ekle</button>
      </div>
      </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-translate="loginTitle">GiriÅŸ / KayÄ±t</h3>
                <button class="modal-close" onclick="closeLoginModal()">âœ–</button>
  </div>
            <div class="modal-body">
                <input type="text" id="identifier" placeholder="Email veya Telefon" data-placeholder="email">
                <input type="password" id="password" placeholder="Åifre" data-placeholder="password">
                <label>
                    <input type="checkbox" id="rememberMe"> 
                    <span data-translate="rememberMe">Beni HatÄ±rla</span>
                </label>
      </div>
            <div class="modal-footer">
                <button onclick="doLogin()" data-translate="loginBtn">GiriÅŸ</button>
                <button onclick="doRegister()" data-translate="registerBtn">KayÄ±t</button>
    </div>
    </div>
  </div>

    <!-- Scripts -->
  <script src="translations.js"></script>
    <script src="location-manager.js"></script>
  <script src="app.js"></script>
  <script src="advanced-features.js"></script>
  
  <script>
        // Sayfa yÃ¼klendiÄŸinde Ã§alÄ±ÅŸacak fonksiyonlar
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ Sayfa yÃ¼klendi, lokasyon sistemi baÅŸlatÄ±lÄ±yor...');
            
            // Lokasyon gÃ¶stergesini gÃ¼ncelle
            updateLocationIndicator();
            
            // MenÃ¼ butonlarÄ±
            document.getElementById('btnMenu').onclick = toggleMobileMenu;
            document.getElementById('btnLocation').onclick = showLocationModal;
            document.getElementById('btnSponsor').onclick = () => {
                if (window.sponsorSystem) {
                    window.sponsorSystem.showSponsorCreateModal();
                }
            };
            
            // Sponsor sistemi baÅŸlat
            if (window.SponsorChannelSystem) {
                window.sponsorSystem = new window.SponsorChannelSystem();
            }
        });

        // Lokasyon gÃ¶stergesini gÃ¼ncelle
        function updateLocationIndicator() {
            const locationData = JSON.parse(localStorage.getItem('userLocation') || '{}');
            const locationIndicator = document.getElementById('locationIndicator');
            const currentLocation = document.getElementById('currentLocation');
            
            if (locationData.city && locationData.country) {
                locationIndicator.style.display = 'inline-flex';
                currentLocation.textContent = `${locationData.city}, ${locationData.country}`;
            }
        }

        // Lokasyon modal'Ä± gÃ¶ster
        function showLocationModal() {
            const locationData = JSON.parse(localStorage.getItem('userLocation') || '{}');
            alert(`ğŸ“ Mevcut Lokasyon:\n${locationData.city || 'Bilinmiyor'}, ${locationData.country || 'Bilinmiyor'}\n\nğŸŒ Dil: ${localStorage.getItem('selectedLanguage') || 'TR'}\n\nLokasyon otomatik olarak algÄ±lanmÄ±ÅŸtÄ±r.`);
        }

        // Mobil menÃ¼ toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('open');
        }

        // Lokasyon deÄŸiÅŸtiÄŸinde gÃ¶stergeleri gÃ¼ncelle
        window.addEventListener('storage', (e) => {
            if (e.key === 'userLocation') {
                updateLocationIndicator();
            }
        });
  </script>
</body>
</html>