<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Anonim Sohbet</title>
  <style>
    body{margin:0;font-family:"Courier New",monospace;background:#000;color:#eee}
    .menubar{display:flex;justify-content:space-between;align-items:center;background:#111;padding:6px;border-bottom:1px solid #333}
    .menubar button{background:#222;border:1px solid #444;color:#eee;padding:4px 10px;cursor:pointer}
    .layout{display:grid;grid-template-columns:240px 1fr 220px;height:calc(100vh - 38px)}
    .pane{background:#111;border-right:1px solid #333;display:flex;flex-direction:column;min-height:0}
    .pane-right{border-left:1px solid #333}
    .pane-title{padding:6px;font-weight:bold;border-bottom:1px solid #333}
    .list{list-style:none;margin:0;padding:6px;overflow:auto}
    .list li{padding:4px 6px;cursor:pointer;user-select:none}
    .list li:hover{background:#0a0a0a}
    .list li.sponsor{color:#4af;font-weight:bold}
    .center{display:flex;flex-direction:column;min-height:0}
    .topic{padding:6px;text-align:center;border-bottom:1px solid #333;color:#aaa}
    .messages{flex:1;overflow:auto;padding:6px;font-size:13px;background:#000}
    .info{color:#888;text-align:center;font-style:italic;margin:4px 0}
    .inputbar{display:flex;border-top:1px solid #333;background:#111;gap:6px;padding:6px}
    .inputbar input{flex:1;background:#000;color:#eee;border:1px solid #333;padding:6px}
    .inputbar button{background:#222;color:#eee;border:1px solid #333;padding:6px}
    .muted{color:#aaa;font-size:12px}
    #emojiBox{position:absolute;display:none;z-index:3000}
  </style>
  <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
</head>
<body>
  <div class="menubar">
    <span id="authStatus">Anonim</span>
    <div>
      <button id="btnHobbies">Ä°lgi AlanlarÄ±</button>
      <button id="btnLogin">GiriÅŸ</button>
      <button id="btnLogout" style="display:none">Ã‡Ä±kÄ±ÅŸ</button>
    </div>
  </div>

  <div class="layout">
    <aside class="pane">
      <div class="pane-title">Sponsorlu Kanallar</div>
      <ul id="sponsorList" class="list"></ul>

      <div class="pane-title">Ã–nerilen Kanallar</div>
      <ul id="recommendedList" class="list"></ul>

      <div class="pane-title">KanallarÄ±m</div>
      <ul id="channelList" class="list"></ul>
    </aside>

    <main class="center">
      <div id="topic" class="topic">#genel</div>
      <div id="messages" class="messages"></div>
      <form id="form" class="inputbar">
        <input id="input" placeholder="Mesaj yaz..."/>
        <button>GÃ¶nder</button>
        <button type="button" id="btnEmoji">ðŸ˜€</button>
      </form>
      <emoji-picker id="emojiBox"></emoji-picker>
    </main>
  </div>

  <!-- Hobiler Modal -->
  <div id="hobbyModal" class="modal">
    <div class="modal-content" style="max-height:70vh;overflow:auto">
      <button onclick="hobbyModal.classList.remove('open')" class="modal-close">âœ–</button>
      <h3>Ä°lgi AlanlarÄ±</h3>
      <div id="hobbyList"></div>
      <div style="margin-top:8px"><b>SeÃ§ilenler:</b> <span id="hobbyPicked"></span></div>
      <button id="saveHobbies">Kaydet</button>
    </div>
  </div>

<script>
const ALL_HOBBIES = ["Futbol","Basketbol","SatranÃ§","MÃ¼zik","Film","Dizi","Anime","YazÄ±lÄ±m","Yapay ZekÃ¢","Yemek","Kitap"];
const HOBBY_TO_CHANNELS = {
  "Futbol":["#futbol","#spor"], "Basketbol":["#basketbol","#spor"],
  "SatranÃ§":["#satranÃ§","#oyun"], "MÃ¼zik":["#mÃ¼zik","#sohbet"],
  "Film":["#film","#sohbet"], "Dizi":["#dizi","#sohbet"], "Anime":["#anime"],
  "YazÄ±lÄ±m":["#yazÄ±lÄ±m","#teknoloji"], "Yapay ZekÃ¢":["#yapayzeka","#teknoloji"],
  "Yemek":["#yemek","#tarifler"], "Kitap":["#kitap","#sohbet"]
};

let hobbyPicked = new Set(JSON.parse(localStorage.getItem("hobbies")||"[]"));

function openHobbyModal(){
  hobbyModal.classList.add("open");
  const list=document.getElementById("hobbyList");
  list.innerHTML="";
  ALL_HOBBIES.forEach(h=>{
    const row=document.createElement("div");
    const btn=document.createElement("button");
    btn.textContent=hobbyPicked.has(h)?"âœ“":"+";
    btn.onclick=()=>{ 
      if(hobbyPicked.has(h)) hobbyPicked.delete(h); else hobbyPicked.add(h); 
      openHobbyModal(); 
    };
    row.textContent=h+" "; row.appendChild(btn); list.appendChild(row);
  });
  renderPicked();
}
function renderPicked(){
  document.getElementById("hobbyPicked").textContent=[...hobbyPicked].join(", ");
}
function renderRecommended(){
  const ul=document.getElementById("recommendedList");
  ul.innerHTML="";
  [...hobbyPicked].forEach(h=> (HOBBY_TO_CHANNELS[h]||[]).forEach(ch=>{
    const li=document.createElement("li");
    li.textContent=ch;
    ul.appendChild(li);
  }));
}
document.getElementById("btnHobbies").onclick=openHobbyModal;
document.getElementById("saveHobbies").onclick=()=>{
  localStorage.setItem("hobbies",JSON.stringify([...hobbyPicked]));
  hobbyModal.classList.remove("open");
  renderRecommended();
};

// ilk aÃ§Ä±lÄ±ÅŸ
renderRecommended();
</script>
</body>
</html>