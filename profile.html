<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Profil</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <section class="card">
      <h1>Profil</h1>
      <img id="avatar" class="avatar" alt="Profil resmi" />
      <form id="profileForm">
        <div class="row">
          <label for="firstName">Ad</label>
          <input id="firstName" type="text" required />
        </div>
        <div class="row">
          <label for="lastName">Soyad</label>
          <input id="lastName" type="text" required />
        </div>
        <div class="row">
          <label for="birthDate">Doğum Tarihi</label>
          <input id="birthDate" type="date" required />
        </div>
        <div class="row">
          <label for="gender">Cinsiyet</label>
          <select id="gender" required>
            <option value="">Seçiniz</option>
            <option value="female">Kadın</option>
            <option value="male">Erkek</option>
            <option value="other">Diğer</option>
          </select>
        </div>
        <div class="row">
          <label for="city">Şehir</label>
          <input id="city" type="text" required />
        </div>
        <div class="row">
          <label for="email">E-posta (opsiyonel)</label>
          <input id="email" type="email" />
        </div>
        <div class="row">
          <label for="phone">Telefon (opsiyonel)</label>
          <input id="phone" type="tel" />
        </div>
        <div class="row">
          <label for="nickname">Takma Ad</label>
          <input id="nickname" type="text" readonly />
        </div>
        <div class="actions">
          <button class="primary" type="submit">Kaydet</button>
        </div>
      </form>
    </section>
  </main>
</body>
<script src="profile.js"></script>
<script>
  const form = document.getElementById('profileForm');
  const data = getProfile();
  document.getElementById('firstName').value = data.firstName || '';
  document.getElementById('lastName').value = data.lastName || '';
  document.getElementById('birthDate').value = data.birthDate || '';
  document.getElementById('gender').value = data.gender || '';
  document.getElementById('city').value = data.city || '';
  document.getElementById('email').value = data.email || '';
  document.getElementById('phone').value = data.phone || '';
  document.getElementById('nickname').value = getOrCreateNickname();

  const avatar = document.getElementById('avatar');
  function updateAvatar() {
    const g = document.getElementById('gender').value;
    if (g === 'female') avatar.src = 'img/avatar-female.svg';
    else if (g === 'male') avatar.src = 'img/avatar-male.svg';
    else avatar.src = 'img/avatar-neutral.svg';
  }
  updateAvatar();
  document.getElementById('gender').addEventListener('change', updateAvatar);

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const updated = {
      firstName: document.getElementById('firstName').value.trim(),
      lastName: document.getElementById('lastName').value.trim(),
      birthDate: document.getElementById('birthDate').value,
      gender: document.getElementById('gender').value,
      city: document.getElementById('city').value.trim(),
      email: document.getElementById('email').value.trim(),
      phone: document.getElementById('phone').value.trim(),
      nickname: document.getElementById('nickname').value.trim(),
    };
    saveProfile(updated);
    alert('Profil kaydedildi');
  });
</script>
</html>
