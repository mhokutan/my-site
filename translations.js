// ===================== Ã‡ok Dilli Destek - Lokasyona GÃ¶re Dil DeÄŸiÅŸimi =====================

const translations = {
  // TÃ¼rkÃ§e (varsayÄ±lan)
  'TR': {
    // MenÃ¼
    'menu': 'MenÃ¼',
    'login': 'GiriÅŸ',
    'logout': 'Ã‡Ä±kÄ±ÅŸ',
    'profile': 'Profil DÃ¼zenle',
    'feedback': 'Ã–neri',
    'location': 'Lokasyon',
    'sponsor': 'Sponsor',
    'donate': 'â˜• Kahve Ä°kram Et',
    
    // Kanallar
    'sponsorChannels': 'Sponsorlu Kanallar',
    'generalChannels': 'Genel Kanallar',
    'favoriteChannels': 'Favori KanallarÄ±m',
    'users': 'KullanÄ±cÄ±lar',
    'following': 'Takip Ettiklerim',
    
    // Kanal baÅŸlÄ±klarÄ±
    'sponsorChannelsTitle': 'ğŸ’° Sponsor Kanallar',
    'generalChannelsTitle': 'ğŸŒ Genel Kanallar',
    'favoriteCitiesTitle': 'ğŸ™ï¸ Favori Åehirler',
    
    // Modals
    'loginTitle': 'GiriÅŸ / KayÄ±t',
    'profileTitle': 'Profil DÃ¼zenle',
    'locationTitle': 'Lokasyon Ayarla',
    'sponsorTitle': 'Sponsor Kanal OluÅŸtur',
    'channelTitle': 'Yeni Kanal OluÅŸtur',
    'hobbiesTitle': 'Ä°lgi AlanlarÄ±',
    
    // Form fields
    'email': 'Email veya Telefon',
    'password': 'Åifre',
    'firstName': 'Ä°sim',
    'lastName': 'Soyisim',
    'gender': 'Cinsiyet',
    'birth': 'DoÄŸum Tarihi',
    'country': 'Ãœlke',
    'city': 'Åehir',
    'channelName': 'Kanal adÄ±',
    'channelPassword': 'Åifre',
    
    // Buttons
    'loginBtn': 'GiriÅŸ',
    'registerBtn': 'KayÄ±t',
    'saveBtn': 'Kaydet',
    'cancelBtn': 'Ä°ptal',
    'createBtn': 'OluÅŸtur',
    'addBtn': 'Ekle',
    'closeBtn': 'Kapat',
    'saveHobbiesBtn': 'Ä°lgi AlanlarÄ±nÄ± Kaydet',
    'rememberMe': 'Beni HatÄ±rla',
    'hobbiesTitle': 'Ä°lgi AlanlarÄ±',
    'selectHobbies': 'Ä°lgi alanlarÄ±nÄ±zÄ± seÃ§in',
    'selectedHobbies': 'SeÃ§ilenler:',
    'hobbiesHint': 'SeÃ§tiklerine gÃ¶re Ã¶nerilen kanallar otomatik eklenecek.',
    'createChannel': 'Kanal OluÅŸtur',
    'addChannel': 'Kanal Ekle',
    'saveHobbies': 'Ä°lgi AlanlarÄ±nÄ± Kaydet',
    
    // Login/Register specific
    'loginSubtitle': 'HesabÄ±nÄ±za giriÅŸ yapÄ±n',
    'registerSubtitle': 'Yeni hesap oluÅŸturun',
    'forgotPassword': 'Åifremi unuttum',
    'alreadyHaveAccount': 'Zaten hesabÄ±nÄ±z var mÄ±?',
    'dontHaveAccount': 'HesabÄ±nÄ±z yok mu?',
    'loginError': 'GiriÅŸ baÅŸarÄ±sÄ±z',
    'registerError': 'KayÄ±t baÅŸarÄ±sÄ±z',
    'loginSuccess': 'GiriÅŸ baÅŸarÄ±lÄ±',
    'registerSuccess': 'KayÄ±t baÅŸarÄ±lÄ±',
    
    // Messages
    'loginSuccess': 'GiriÅŸ baÅŸarÄ±lÄ±',
    'registerSuccess': 'KayÄ±t baÅŸarÄ±lÄ±',
    'profileUpdated': 'Profil gÃ¼ncellendi',
    'locationUpdated': 'Lokasyon gÃ¼ncellendi',
    'channelCreated': 'Kanal oluÅŸturuldu',
    'channelJoined': 'Kanala katÄ±ldÄ±nÄ±z',
    'hobbiesSaved': 'Ä°lgi alanlarÄ± kaydedildi',
    
    // Hints
    'loginHint': 'GiriÅŸ yapmadan anonim sohbet edebilirsin; fakat DM, arkadaÅŸ ekleme ve kanal ekleme iÃ§in giriÅŸ gerekir.',
    'channelHint': 'Kendi kanalÄ±nÄ± ekle (#konya gibi).',
    'locationHint': 'Lokasyonunuz sponsor kanallar ve bÃ¶lgesel Ã¶zellikler iÃ§in kullanÄ±lÄ±r.',
    'sponsorHint': 'BÃ¶lgenizdeki kullanÄ±cÄ±lara sponsor kanalÄ±nÄ±z gÃ¶sterilecek.',
    
    // Channel types
    'public': 'Herkese AÃ§Ä±k',
    'private': 'Åifreli (Ã–zel)',
    
    // Status
    'anonymous': 'Anonim',
    'loggedIn': 'GiriÅŸ yapÄ±ldÄ±',
    'typing': 'yazÄ±yor...',
    
    // Time
    'now': 'ÅŸimdi',
    'today': 'bugÃ¼n',
    'yesterday': 'dÃ¼n'
  },
  
  // Ä°ngilizce
  'US': {
    'menu': 'Menu',
    'login': 'Login',
    'logout': 'Logout',
    'profile': 'Edit Profile',
    'feedback': 'Feedback',
    'location': 'Location',
    'sponsor': 'Sponsor',
    'donate': 'â˜• Buy me a coffee',
    
    'sponsorChannels': 'Sponsored Channels',
    'generalChannels': 'General Channels',
    'favoriteChannels': 'My Favorite Channels',
    'users': 'Users',
    'following': 'Following',
    
    // Kanal baÅŸlÄ±klarÄ±
    'sponsorChannelsTitle': 'ğŸ’° Sponsor Channels',
    'generalChannelsTitle': 'ğŸŒ General Channels',
    'favoriteCitiesTitle': 'ğŸ™ï¸ Favorite Cities',
    
    'loginTitle': 'Login / Register',
    'profileTitle': 'Edit Profile',
    'locationTitle': 'Set Location',
    'sponsorTitle': 'Create Sponsor Channel',
    'channelTitle': 'Create New Channel',
    'hobbiesTitle': 'Interests',
    
    'email': 'Email or Phone',
    'password': 'Password',
    'firstName': 'First Name',
    'lastName': 'Last Name',
    'gender': 'Gender',
    'birth': 'Birth Date',
    'country': 'Country',
    'city': 'City',
    'channelName': 'Channel name',
    'channelPassword': 'Password',
    
    'loginBtn': 'Login',
    'registerBtn': 'Register',
    'saveBtn': 'Save',
    'cancelBtn': 'Cancel',
    'createBtn': 'Create',
    'addBtn': 'Add',
    'closeBtn': 'Close',
    'saveHobbiesBtn': 'Save Interests',
    'rememberMe': 'Remember Me',
    
    // Login/Register specific
    'loginSubtitle': 'Sign in to your account',
    'registerSubtitle': 'Create new account',
    'forgotPassword': 'Forgot password',
    'alreadyHaveAccount': 'Already have an account?',
    'dontHaveAccount': "Don't have an account?",
    'loginError': 'Login failed',
    'registerError': 'Registration failed',
    'loginSuccess': 'Login successful',
    'registerSuccess': 'Registration successful',
    
    'loginSuccess': 'Login successful',
    'registerSuccess': 'Registration successful',
    'profileUpdated': 'Profile updated',
    'locationUpdated': 'Location updated',
    'channelCreated': 'Channel created',
    'channelJoined': 'Joined channel',
    'hobbiesSaved': 'Interests saved',
    
    'loginHint': 'You can chat anonymously without login; but login is required for DM, adding friends and adding channels.',
    'channelHint': 'Add your own channel (like #newyork).',
    'locationHint': 'Your location is used for sponsor channels and regional features.',
    'sponsorHint': 'Your sponsor channel will be shown to users in your region.',
    
    'public': 'Public',
    'private': 'Private (Password Protected)',
    
    'anonymous': 'Anonymous',
    'loggedIn': 'Logged in',
    'typing': 'typing...',
    
    'now': 'now',
    'today': 'today',
    'yesterday': 'yesterday'
  },
  
  // FransÄ±zca
  'FR': {
    'menu': 'Menu',
    'login': 'Connexion',
    'logout': 'DÃ©connexion',
    'profile': 'Modifier le Profil',
    'feedback': 'Commentaires',
    'location': 'Localisation',
    'sponsor': 'Sponsor',
    
    'sponsorChannels': 'Canaux SponsorisÃ©s',
    'generalChannels': 'Canaux GÃ©nÃ©raux',
    'favoriteChannels': 'Mes Canaux Favoris',
    'users': 'Utilisateurs',
    'following': 'Abonnements',
    
    'loginTitle': 'Connexion / Inscription',
    'profileTitle': 'Modifier le Profil',
    'locationTitle': 'DÃ©finir la Localisation',
    'sponsorTitle': 'CrÃ©er un Canal Sponsor',
    'channelTitle': 'CrÃ©er un Nouveau Canal',
    'hobbiesTitle': 'Centres d\'IntÃ©rÃªt',
    
    'email': 'Email ou TÃ©lÃ©phone',
    'password': 'Mot de passe',
    'firstName': 'PrÃ©nom',
    'lastName': 'Nom de famille',
    'gender': 'Genre',
    'birth': 'Date de naissance',
    'country': 'Pays',
    'city': 'Ville',
    'channelName': 'Nom du canal',
    'channelPassword': 'Mot de passe',
    
    'loginBtn': 'Connexion',
    'registerBtn': 'Inscription',
    'saveBtn': 'Enregistrer',
    'cancelBtn': 'Annuler',
    'createBtn': 'CrÃ©er',
    'addBtn': 'Ajouter',
    'closeBtn': 'Fermer',
    
    'loginSuccess': 'Connexion rÃ©ussie',
    'registerSuccess': 'Inscription rÃ©ussie',
    'profileUpdated': 'Profil mis Ã  jour',
    'locationUpdated': 'Localisation mise Ã  jour',
    'channelCreated': 'Canal crÃ©Ã©',
    'channelJoined': 'Rejoint le canal',
    'hobbiesSaved': 'Centres d\'intÃ©rÃªt enregistrÃ©s',
    
    'loginHint': 'Vous pouvez discuter anonymement sans connexion; mais la connexion est requise pour les MP, ajouter des amis et ajouter des canaux.',
    'channelHint': 'Ajoutez votre propre canal (comme #paris).',
    'locationHint': 'Votre localisation est utilisÃ©e pour les canaux sponsors et les fonctionnalitÃ©s rÃ©gionales.',
    'sponsorHint': 'Votre canal sponsor sera affichÃ© aux utilisateurs de votre rÃ©gion.',
    
    'public': 'Public',
    'private': 'PrivÃ© (ProtÃ©gÃ© par mot de passe)',
    
    'anonymous': 'Anonyme',
    'loggedIn': 'ConnectÃ©',
    'typing': 'en train d\'Ã©crire...',
    
    'now': 'maintenant',
    'today': 'aujourd\'hui',
    'yesterday': 'hier'
  },
  
  // Almanca
  'DE': {
    'menu': 'MenÃ¼',
    'login': 'Anmelden',
    'logout': 'Abmelden',
    'profile': 'Profil Bearbeiten',
    'feedback': 'Feedback',
    'location': 'Standort',
    'sponsor': 'Sponsor',
    
    'sponsorChannels': 'Gesponserte KanÃ¤le',
    'generalChannels': 'Allgemeine KanÃ¤le',
    'favoriteChannels': 'Meine LieblingskanÃ¤le',
    'users': 'Benutzer',
    'following': 'Folge ich',
    
    'loginTitle': 'Anmelden / Registrieren',
    'profileTitle': 'Profil Bearbeiten',
    'locationTitle': 'Standort Festlegen',
    'sponsorTitle': 'Sponsor-Kanal Erstellen',
    'channelTitle': 'Neuen Kanal Erstellen',
    'hobbiesTitle': 'Interessen',
    
    'email': 'E-Mail oder Telefon',
    'password': 'Passwort',
    'firstName': 'Vorname',
    'lastName': 'Nachname',
    'gender': 'Geschlecht',
    'birth': 'Geburtsdatum',
    'country': 'Land',
    'city': 'Stadt',
    'channelName': 'Kanalname',
    'channelPassword': 'Passwort',
    
    'loginBtn': 'Anmelden',
    'registerBtn': 'Registrieren',
    'saveBtn': 'Speichern',
    'cancelBtn': 'Abbrechen',
    'createBtn': 'Erstellen',
    'addBtn': 'HinzufÃ¼gen',
    'closeBtn': 'SchlieÃŸen',
    
    'loginSuccess': 'Anmeldung erfolgreich',
    'registerSuccess': 'Registrierung erfolgreich',
    'profileUpdated': 'Profil aktualisiert',
    'locationUpdated': 'Standort aktualisiert',
    'channelCreated': 'Kanal erstellt',
    'channelJoined': 'Kanal beigetreten',
    'hobbiesSaved': 'Interessen gespeichert',
    
    'loginHint': 'Sie kÃ¶nnen anonym chatten ohne Anmeldung; aber Anmeldung ist erforderlich fÃ¼r DMs, Freunde hinzufÃ¼gen und KanÃ¤le hinzufÃ¼gen.',
    'channelHint': 'FÃ¼gen Sie Ihren eigenen Kanal hinzu (wie #berlin).',
    'locationHint': 'Ihr Standort wird fÃ¼r Sponsor-KanÃ¤le und regionale Funktionen verwendet.',
    'sponsorHint': 'Ihr Sponsor-Kanal wird Benutzern in Ihrer Region angezeigt.',
    
    'public': 'Ã–ffentlich',
    'private': 'Privat (Passwort geschÃ¼tzt)',
    
    'anonymous': 'Anonym',
    'loggedIn': 'Angemeldet',
    'typing': 'tippt...',
    
    'now': 'jetzt',
    'today': 'heute',
    'yesterday': 'gestern'
  },
  
  // Ä°spanyolca
  'ES': {
    'menu': 'MenÃº',
    'login': 'Iniciar SesiÃ³n',
    'logout': 'Cerrar SesiÃ³n',
    'profile': 'Editar Perfil',
    'feedback': 'Comentarios',
    'location': 'UbicaciÃ³n',
    'sponsor': 'Patrocinador',
    
    'sponsorChannels': 'Canales Patrocinados',
    'generalChannels': 'Canales Generales',
    'favoriteChannels': 'Mis Canales Favoritos',
    'users': 'Usuarios',
    'following': 'Siguiendo',
    
    'loginTitle': 'Iniciar SesiÃ³n / Registrarse',
    'profileTitle': 'Editar Perfil',
    'locationTitle': 'Establecer UbicaciÃ³n',
    'sponsorTitle': 'Crear Canal Patrocinado',
    'channelTitle': 'Crear Nuevo Canal',
    'hobbiesTitle': 'Intereses',
    
    'email': 'Email o TelÃ©fono',
    'password': 'ContraseÃ±a',
    'firstName': 'Nombre',
    'lastName': 'Apellido',
    'gender': 'GÃ©nero',
    'birth': 'Fecha de Nacimiento',
    'country': 'PaÃ­s',
    'city': 'Ciudad',
    'channelName': 'Nombre del canal',
    'channelPassword': 'ContraseÃ±a',
    
    'loginBtn': 'Iniciar SesiÃ³n',
    'registerBtn': 'Registrarse',
    'saveBtn': 'Guardar',
    'cancelBtn': 'Cancelar',
    'createBtn': 'Crear',
    'addBtn': 'Agregar',
    'closeBtn': 'Cerrar',
    
    'loginSuccess': 'Inicio de sesiÃ³n exitoso',
    'registerSuccess': 'Registro exitoso',
    'profileUpdated': 'Perfil actualizado',
    'locationUpdated': 'UbicaciÃ³n actualizada',
    'channelCreated': 'Canal creado',
    'channelJoined': 'Unido al canal',
    'hobbiesSaved': 'Intereses guardados',
    
    'loginHint': 'Puedes chatear anÃ³nimamente sin iniciar sesiÃ³n; pero se requiere inicio de sesiÃ³n para DM, agregar amigos y agregar canales.',
    'channelHint': 'Agrega tu propio canal (como #madrid).',
    'locationHint': 'Tu ubicaciÃ³n se usa para canales patrocinados y caracterÃ­sticas regionales.',
    'sponsorHint': 'Tu canal patrocinado se mostrarÃ¡ a los usuarios de tu regiÃ³n.',
    
    'public': 'PÃºblico',
    'private': 'Privado (Protegido con contraseÃ±a)',
    
    'anonymous': 'AnÃ³nimo',
    'loggedIn': 'Conectado',
    'typing': 'escribiendo...',
    
    'now': 'ahora',
    'today': 'hoy',
    'yesterday': 'ayer'
  }
};

// Dil deÄŸiÅŸtirme fonksiyonu
function changeLanguage(countryCode) {
  const lang = translations[countryCode] || translations['TR'];
  const elements = document.querySelectorAll('[data-translate]');
  
  elements.forEach(element => {
    const key = element.getAttribute('data-translate');
    if (lang[key]) {
      element.textContent = lang[key];
    }
  });
  
  // Placeholder'larÄ± gÃ¼ncelle
  const placeholders = document.querySelectorAll('[data-placeholder]');
  placeholders.forEach(element => {
    const key = element.getAttribute('data-placeholder');
    if (lang[key]) {
      element.placeholder = lang[key];
    }
  });
  
  // Title'larÄ± gÃ¼ncelle
  const titles = document.querySelectorAll('[data-title]');
  titles.forEach(element => {
    const key = element.getAttribute('data-title');
    if (lang[key]) {
      element.title = lang[key];
    }
  });
  
  // Dil kodunu localStorage'a kaydet
  localStorage.setItem('selectedLanguage', countryCode);
  
  console.log(`ğŸŒ Dil deÄŸiÅŸtirildi: ${countryCode}`);
}

// Sayfa yÃ¼klendiÄŸinde dil ayarÄ±nÄ± yÃ¼kle
function loadLanguage() {
  const savedLanguage = localStorage.getItem('selectedLanguage');
  const userLocation = JSON.parse(localStorage.getItem('userLocation') || '{}');
  
  // Ã–nce kaydedilmiÅŸ dil varsa onu kullan
  if (savedLanguage && translations[savedLanguage]) {
    changeLanguage(savedLanguage);
    return;
  }
  
  // Yoksa kullanÄ±cÄ±nÄ±n lokasyonuna gÃ¶re dil belirle
  if (userLocation.country && translations[userLocation.country]) {
    changeLanguage(userLocation.country);
  } else {
    // VarsayÄ±lan olarak TÃ¼rkÃ§e
    changeLanguage('TR');
  }
}

// Lokasyon deÄŸiÅŸtiÄŸinde dil deÄŸiÅŸtir
function onLocationChange(countryCode) {
  if (translations[countryCode]) {
    changeLanguage(countryCode);
  }
}

// Global olarak eriÅŸilebilir yap
window.changeLanguage = changeLanguage;
window.loadLanguage = loadLanguage;
window.onLocationChange = onLocationChange;
